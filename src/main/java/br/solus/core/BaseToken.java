package br.solus.core;

import static io.restassured.RestAssured.given;

import java.util.HashMap;
import java.util.Map;

import io.restassured.RestAssured;
import io.restassured.http.ContentType;

public class BaseToken {
    private static final String TOKEN_INSTALL = "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJpc3MiOiJTb2x1cyIsImlhdCI6MTc0NDEzMjI5NSwic3ViIjoiNzE4Njc3Iiwia2V5X3B1YmxpYyI6IjE3NDQxMjE0OTU6UkVTVEFTU1VSRUQiLCJrZXlfdHlwZSI6IkEiLCJ1c3VhcmlvIjoiUkVTVEFTU1VSRUQiLCJhdWQiOiJDNTgwNzM0QS05QkMxLTRCQkItQjJFQS1DMkQ5MDVDMDkxRTI6QUE1QzMwRTUtRjZERC00NzZGLUIwOTgtQTU1QzU1MzcxN0EyOjVDRTQ2M0UyLTY1RjItNEQzQS1BMTMzLTYwN0MwMkYwMzc1RjpCOTdENEMzMi05QTAxLTQxNkItQkI2MS00NEVDRTNBQTZGNjk6NzE4NDU2OUMtQkVCNC00RTQ4LTlFNkEtMDgzOTc5N0Y1MUE2Ojc3RTlCMUFDLTlFQUEtNEIzMy1BMjkyLTY0MDIzMTk1NTRFRTpDQzRERDMzNi04ODQwLTRERTMtOUIxNS0xNkI0NzQ1Njk4RTI6QjBCQTRERjktMEU1Ri00Mzc2LTk1NjMtN0U4MTNFMjZCODI2OjcwNzE5OTI5LUE3OUMtNDQ0Ri1COTc1LTFENUM5RUMzRkM3OTo2OEI0NEY2Qi00NjdCLTQ2MkUtOERFNC1DNDkzNEYxRUY3QkE6MUYwRDI0RjctODdGNi00ODk1LTg1RUItNUQzM0NGRDA4RDBFOjdCOUQ3NjRFLUM0N0ItNDI5QS04RDQzLUU0RTk2OTBDNUM5NDo0M0U4MkUyNC00MjM5LTRDNEItOENGQS04MEVGRjk0N0RCN0M6OUJFNzdBQUYtREM4Mi00NjQzLUExRjctNTVFNzg1NEU0QkYzOkNBQjFCMzg2LTU1QTctNDk0RC05QkMyLUJCNjU4QzhBQjUzNDoxNDFDNzU0Qy04OUZGLTRGRDctQkUwMy0zMzgxN0RFRUE1MEU6NjVFQzY0RTktQ0U2Ni00QjE4LUJEMDctODgyM0UyMUQwODI5OjY3RTQ3Qjg2LUM3N0YtNDcxMy1BN0I5LURCMTQwRjFDODAxNzpBNUMxMjI4OC0xNjc4LTQ0N0YtOEY3QS1GRjIyRDY4NTBGQjQ6ODAxOEU1QUYtN0EwQi00ODJCLTk3QjgtQUYxOEI5NTU0NTJDOkZBQkRGNjBBLTBGQUMtNEUyNi05QkYzLUQ2NTU1MjVENTY4NjpEN0RFRTgxOS04NzQzLTQ1NTEtODYzNi1DNTk5NDU4RjE1QjU6NEE0MkYyQjMtMDYxNS00MDVGLTg4MzItMzE2MkY5RkM4QUNGOkIwNUVBRTI2LTM4MjEtNEI1QS05RkIzLTcwNEU4QzA3MjgwMzo3NUQzNzhENC1COTNBLTRCMTgtODM3Mi02QjRFQTg5RTAxQzY6QjU3RUY1RTUtNTk1Mi00QURCLUEyNDMtNEJFMDczODcyMTI5OjUyMkMxOUEwLUE5NzAtNDY5NS1CQUU3LUE0RDZEMzI5QTA5MTo1RDMwNjBDMS01RUJCLTRFNkQtOTEzRC00NUQ0NTU1NjczMDA6MzAzRURGMjItNUI4Mi00RUIwLUI2OUItMzNFN0I1N0E5RDAzOkE4MjQxRTZCLTM1NkYtNDRGOS1CRDg2LTM0NDNFMjhFRUZCMDpBNEQ2OTlCMi1FQkVDLTREN0QtOURGQS04OEVFQzM0NURBMTM6Q0E2MTUyOEMtRTIyQi00M0Y3LUExNUEtNTNDQTFBMDQxNjgxOjkyRjQ4QjU3LTRGNkUtNEI2Mi04MDZBLTY0OTc2OTAxRkM2ODo5QTA2MDVDQi1DMUU0LTQ0NzEtOTA5Ny1GRDM1QzVBQTM1NUQ6Mjk3NTQyQzgtMEQ3OC00NDkzLTlDOUEtRTAzOUM1RkNFREIwOjcxQTdDMTVFLUY1MEEtNDBEQS04RkVBLTM2QUZFMDYzODAzMTo0QTc2MkIxNi00OUNGLTQzNzQtQTlDMi1GMTIzMkNFNzhGMUI6NUExOUQ0NTctQzJBRi00NTE1LTg0OEYtRkVDOEZENjg4NzM1OjZDRUVDRjVBLUNBRjktNDE5RS04QjkzLTE4MTlCOTdCQTQwOToyNTE1NkRFOC1CQjc2LTQzRTYtOTUzMy1BREE3M0VBRERBMDk6Q0I2MDg4NDMtQ0FGQy00MTUyLTgzMDYtNDgwNTdCRTI2QkRGOjcwN0RBQjRGLThFOTMtNDY3NS05MEZBLUNDNTA4QzI4QzUxOTpCOTEwRTkwNi01QTdDLTQwMUEtOEE4RC0zODI2NTRBQjk0MzU6NTQwQ0MxQzgtMzRDRS00Q0E5LTk5NUItOTUyQkUxREMzNzJBOkYxQjczNzlELTAzMzgtNDU2RS04N0QyLUYxN0E0MzQwOTRGQzozMTA1QUMwRS01MUVGLTQ5RUYtQjAyNS00RUM2NDMzQkVFNTM6OEI5RUQ2NEEtQzBGOC00OEExLTg1RUUtQzFDMzdGODFDQURDOjdCMzBDRkFDLUE1MzYtNDlEMi05RUZFLTFBNUUwQzI0NUI1NzpBNkU2RkNFMC0zODcyLTQzQkYtQTk2NC04MEZDQTc2MzlBMzU6QzNGMEJDQjUtNEIwNC00RDQ0LUJGRkEtRTk0MzhCRDAwOTBFOjVGNzFFMEY5LTE3QkUtNEY1NS1BRjkzLUM3QTZFMDEzQzY4MTowNjAyREYyNy0xQTk4LTRGNzQtOUZBOC0zMzdDRkUyQzM4MzY6MjYyOUM0ODktMDhEQy00QjVDLUJCMTgtNEU3ODExMjM2N0ZDOjM5Nzc1RUE0LTlBRUUtNDM5MS1BMUU0LTcyQjRDNUY5OUYxQzpCRDY1QzY0My1CMUIwLTQ1N0YtODAwOC0wNkUzRkY5NkE3RjM6QkYwODk5RjEtQ0U2Ni00OUMzLUI0MDYtRUQxNjREQkI2QjgwOjRDQTJGMUM2LUQ5ODEtNDZBQS05MzE1LTVDM0EwOTMzMzRENjo3NjE5RUJFNS0yOEI1LTQ5NTEtOEJBOS0yNjQwRkU4RUM1Q0M6MzFBRjA4NjItQUM5RS00OTFFLUFGNEItQjEzMjlGRTBCRjAzOjI1MkVBNUMwLTFFRjktNDk0Qy1CRUNDLTE3OTgwMkZEMDYwMzpGQzk0Qjg1Qi1CMDc1LTRCRDUtOUYzMC1GMEE0OTEyOTc4MTI6M0I4NUMyM0UtQzlGQy00Nzc1LTk4NTYtNUVFNzU2QzQyMDkzOjNBQ0U5OTNCLTMzRDAtNDc5Qi1CRDVBLUZDNTAwQ0JFOTgxODo5Qzc4M0EyMS1CQTdCLTQwMTItQjdFNC0wMEUxQTczNzJGRjQ6MjA5RTRFMDYtMDk4OC00MkU0LTkxQjctOTBDNUZGNTk0QkFCOkNGQjM0NDM1LUE4QkQtNDBBMy1BRUE2LUY5NzQzQUIyQTQwQTowNzIyM0Q2Ni00QjI4LTQyQUYtODQ5Qy1GNUM3QjhGRjExMjU6In0.lJRa8lp7upJTPTpSS4B3PvaGHZc_Y9Pg4dLixOOVIK0xjtPaEr_Xl-X2kNthzRLV0xkX-vnFaQNQD0PhKSlacA";
    private static final String ENDERECO = "http://172.16.80.21:15160/v1";
    
    public static String retornaTokenInstall() {
        Map<String, String> body = new HashMap<>();
        body.put("login", "RESTASSURED");
        body.put("senha", "e10adc3949ba59abbe56e057f20f883e");
        body.put("acessToken", TOKEN_INSTALL);
        
        return given()
        		.header("Authorization", TOKEN_INSTALL)
        		.contentType(ContentType.JSON)
        		.body(body)
            .when()
                .post(ENDERECO + "/install")
            .then()
            	.statusCode(200)
            	.extract().path("accessToken")
        ;
    }

    public static void retornaToken() {
        Map<String, String> body = new HashMap<>();
        body.put("login", "RESTASSURED");
        body.put("senha", "e10adc3949ba59abbe56e057f20f883e");
        String token = 
        	given()
                .header("Authorization", retornaTokenInstall()) 
                .contentType(ContentType.JSON)
                .body(body)
            .when()
                .post(ENDERECO + "/login")
            .then()
                .statusCode(200)
                .extract().path("token")
                ;
        RestAssured.requestSpecification.header("Authorization", "Bearer " + token);
    }
}
